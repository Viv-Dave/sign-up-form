var VismeStats=function(){var base="https://a.visme.co/";var completeSent=false;var completionPercent=0;var sendBeacon=(navigator&&typeof navigator.sendBeacon=='function')?navigator.sendBeacon.bind(navigator):undefined;function fallbackSend(url){try{if(fetch){fetch(url,{mode:'no-cors',credentials:'omit',method:'POST',});}else{var img=document.createElement('img');img.src=url;}}catch(err){}}
function api(params){var url=base+"info";url+="?cid="+e(cid);url+="&o="+e(object_id);url+="&n="+n;for(var i in params){url+="&"+i+"="+e(params[i]);}
url+="&_="+new Date().getTime();if(sendBeacon){try{sendBeacon(url);}catch(err){fallbackSend(url);}}else{fallbackSend(url);}}
function generateID(){var id="";var chars="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0;i<16;i++){id+=chars.charAt(Math.floor(Math.random()*chars.length));}
return id;}
function getTotalSlides(){if(typeof window.slidesCount!='undefined'&&window.slidesCount>=1){return window.slidesCount;}
var n=document.querySelector('.player-controls__slide-navigator__counter>a');if(n){var slides=parseInt(n.innerHTML);if(!isNaN(slides)&&slides>1)return slides;}
n=document.querySelector('#slides-counter span:nth-child(1)');if(n){var slides=parseInt(n.innerHTML);if(!isNaN(slides)&&slides>1)return slides;}
return 1;}
function getSlideId(){if(typeof window.currentSlide!='undefined'){return window.currentSlide.id||'';}
return '';}
function getSlideName(){if(typeof window.currentSlide!='undefined'){return window.currentSlide.name||'';}
return '';}
function getCurrentSlide(){if(typeof window.currentSlide!='undefined'&&window.currentSlide.index){return window.currentSlide.index+1;}
var slide=1;if(typeof window.selectedSlideIndex!='undefined'){slide=window.selectedSlideIndex+1;}else if(location.hash&&location.hash.startsWith('#s')){slide=parseInt(location.hash.substring(2));if(isNaN(slide)||slide<1)slide=1;}else{var n=document.querySelector('.player-controls__slide-navigator__counter__current');if(n){slide=parseInt(n.getAttribute('value'));if(isNaN(slide)||slide<1)slide=1;}}
return slide;}
var slidesVisited=[];function checkCompletion(){if(completeSent)return;var isComplete=false;var lastSlide=getTotalSlides();var currentSlide=getCurrentSlide();var alreadyVisited=false;for(var i=0;i<slidesVisited.length;i++){if(slidesVisited[i]==currentSlide){alreadyVisited=true;break;}}
if(!alreadyVisited)slidesVisited.push(currentSlide);if(lastSlide>1){completionPercent=Math.round(100*slidesVisited.length/lastSlide);if(slidesVisited.length==lastSlide){isComplete=true;}}
else{var n=document.querySelector('.main-content');if(!n)n=document.querySelector('#content');if(n&&innerHeight>0&&n.getBoundingClientRect){var nr=n.getBoundingClientRect();completionPercent=Math.min(100,Math.round(Math.max(100-100*(nr.bottom-innerHeight)/nr.height)));}else{completionPercent=100;}
if(completionPercent>=99){isComplete=true;}}
if(isComplete){window.removeEventListener("scroll",checkCompletion);completeSent=true;api({t:"tc",cp:completionPercent});}}
window.addEventListener("scroll",checkCompletion);function trackSlide(slide){if(typeof slide!="string")return;if(current_slide==slide)return;current_slide=slide;checkCompletion();api({t:"sb",s:slide,st:getTotalSlides(),cp:completionPercent,si:getSlideId(),sn:getSlideName()});}
var slide_tracking_enabled=false;var current_slide="";function register_slide_tracking(){if(slide_tracking_enabled)return;slide_tracking_enabled=true;var currentSlide=getCurrentSlide();var totalSlides=getTotalSlides();if(totalSlides>1){trackSlide("#s"+currentSlide);}
window.addEventListener('message',function(ev){var payload=ev.data;if(payload&&payload.event&&payload.event=='slide-switch'){if(payload.slidesCount>1){trackSlide("#s"+(payload.slide+1));}}
if(payload&&payload.stats=='ready'){if(payload.aid){api({t:"aid",aid:payload.aid});}}});}
var e=encodeURIComponent||escape;var cid=false;try{if(localStorage){cid=localStorage.getItem("visme-stats-cid");if(!cid){localStorage.setItem("visme-stats-cid",generateID());cid=localStorage.getItem("visme-stats-cid");}}}
catch(err){}
if(!cid){var ck=document.cookie.split(";");for(var i=0;i<ck.length;i++){var t=ck[i].split("=");if(t[0].trim()=="vscid"){cid=t[1];break;}}
if(!cid){cid=generateID();}
var d=new Date(new Date().getTime()+2*365*24*60*1000);document.cookie="vscid="+cid+"; path=/; expires="+d.toUTCString();}
var sw=screen.availWidth;var sh=screen.availHeight;var referrer=document.referrer||"";var n=new Date().getTime()+"."+(Math.random()*99999);var object_id;var ping_to=false;window.addEventListener("beforeunload",function(){if(ping_to)window.clearTimeout(ping_to);api({t:"e",cp:completionPercent});});function ping(){ping_to=window.setTimeout(function(){checkCompletion();api({t:"pn",cp:completionPercent});ping();},ping_to?15000:5000);};function track_aid(){var ifr=document.createElement('iframe');ifr.style.borderWidth='0';ifr.style.position='absolute';ifr.style.width='1px';ifr.style.height='1px';ifr.setAttribute('allowtransparency','true');ifr.src='https://a.visme.co/index.html';document.body.appendChild(ifr);};return{track:function(obj,type,formData){if(window.location.search.indexOf('dbg=1')>0)console.log('init',obj,type);if(!obj){console.log('[ERROR] invalid tracking object id');return;}
if(!type||typeof type=="undefined")type="embed";object_id=obj;var params={ot:type,sw:sw,sh:sh,r:referrer,t:"r"};if(formData){params.fd=JSON.stringify(formData);}
api(params);register_slide_tracking();setTimeout(track_aid,100);ping();},set_option:function(name,value){if(window.location.search.indexOf('dbg=1')>0)console.log('opt',name,value);api({t:"o",m:name,v:value});}};}();